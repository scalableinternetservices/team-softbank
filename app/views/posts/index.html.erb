<%= render 'shared/header' %>

<% if user_signed_in? %>
  <%= javascript_tag 'postHTML5Loc()' %>
  <p id="curloc">Computing location...</p>
  <div>
    <%= form_tag posts_path, :controller => 'posts', :action => 'index', :method => 'get' do %>
      Sort by: 
      <%= select_tag :sort, options_for_select(['distance', 'spice'], @sort), :onChange=>'this.form.submit();' %>
    <% end %>
  </div>
  <div id="postcards">
    <% @posts.each do |post| %>
      <%= render partial: 'postcard', locals: { post: post } %>
    <% end %>
  </div>
<% else %>
  <div class="empty">
    <div class="empty-icon">
      <i class="icon icon-location"></i>
    </div>
    <p class="empty-title h5">You need to sign in or sign up to view posts.</p>
    <p class="empty-subtitle">Click the button to make an account.</p>
    <div class="empty-action">
      <%= link_to 'Sign up', '/users/sign_up', class: "btn btn-primary" %>
    </div>
  </div>
<% end %>


